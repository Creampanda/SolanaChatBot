# Сервис API
### Общее описание

Данный сервис предоставляет функционал чат-бота в Telegram для анализа криптовалютных кошельков в сети Solana. Сервис использует информацию о токенах, их транзакциях и кошельках, собираемую через API DexScreener и Solana RPC. 
Пользователи могут запросить информацию о токене, а затем наблюдать за тем, как меняется количество токенов у первых 50-ти покупателей данного токена. 
Сервис классифицирует кошельки в зависимости от их активности по купле-продаже и предоставляет данные в виде визуального отчета в Telegram.

### Описание работы сервиса
Чат-бот в Telegram предоставляет следующие функции:

- Получение информации о токене по его адресу.
- Анализ истории транзакций первых 50 покупателей токена.
- Классификация кошельков по их активности (полное удержание, продажа >50%, продажа >80%, докупка токенов).
- Визуализация результатов в виде таблицы с использованием эмодзи различных цветов для категорий.
- Обновление отчета по запросу пользователя с указанием изменений по сравнению с предыдущим запросом.
- Возможность добавления нового токена в базу данных для мониторинга.

### Настройка

1. Переменные окружения

Перед запуском приложения убедитесь, что вы установили необходимые переменные окружения. Скопируйте содержимое файла `sample.env` в новый файл с названием `.env` и установите значения в соответствии с вашими настройками:

```bash
POSTGRES_USER="admin"
POSTGRES_PASSWORD="admin"
POSTGRES_DB="postgres"
TELEGRAM_TOKEN=""
SOLANA_RPC_URL=""
PGADMIN_DEFAULT_EMAIL="admin@example.com"
PGADMIN_DEFAULT_PASSWORD="admin"
```

### Запуск
1. Запуск с помощью Docker Compose
Чтобы запустить приложение с использованием Docker Compose, выполните следующую команду в терминале:

```bash
docker-compose up --build
```

Эта команда запустит сервис API вместе с базой данных PostgreSQL и любыми другими необходимыми сервисами.

### Тестирование

1. Запустить docker-compose -f docker-compose-test.yml
2. Создать python3 venv env
3. Активировать env
4. Установить зависимости 
```bash
pip3 install -r requirements.txt
```
5. Запустить тесты
```bash
pytest
```



### Доступ к документации API
После запуска сервисов вы сможете получить доступ к документации API, перейдя по следующему URL в вашем веб-браузере:

http://localhost:8000/docs

Это откроет Swagger UI, где вы сможете исследовать и взаимодействовать с конечными точками API.

### Дополнительная информация
База данных PostgreSQL доступна по умолчанию на порту 5432.

Сервис API доступен по умолчанию на порту 8000.

Сервис Telegram бота настроен на взаимодействие с сервисом API, используя указанный порт API.

# Команды бота:
Получить информацию о токене по его адресу.

Добавить новый токен в базу данных.



# PG_ADMIN

Для доступа к бд используется PG_ADMIN на порту 5050
